# Сервис рекламных площадок

Веб-сервис для подбора рекламных площадок по локациям.

## Описание

Сервис позволяет:
- Загружать рекламные площадки из текстового файла
- Искать подходящие рекламные площадки для заданной локации

Поиск работает по принципу вложенности: если платформа действует в `/ru`, то она также подходит для вложенных локаций типа `/ru/msk`, `/ru/svrd/ekb` и т.д.

## Требования

- .NET 8.0 SDK
- Visual Studio 2022 или VS Code (опционально)

## Запуск сервиса

1. Клонируйте репозиторий:
```bash
git clone https://github.com/arta9696/EffMobile-internship-entry-test.git
```

2. Перейдите в папку с проектом:
```bash
cd EffMobile-internship-entry-test
```

3. Запустите сервис:
```bash
dotnet run
```

Сервис запустится на `https://localhost:7xxx` (HTTPS) и `http://localhost:5xxx` (HTTP).

## Запуск тестов

Из корневой папки проекта:
```bash
dotnet test
```

## API методы

### 1. Загрузка рекламных площадок

**POST** `/api/platforms/load`

Загружает рекламные площадки из файла. Полностью перезаписывает существующие данные.

**Параметры:**
- `file` (form-data) - текстовый файл с рекламными площадками

**Формат файла:**
```
Название площадки:локация1,локация2,локация3
```

**Пример:**
```
Яндекс.Директ:/ru
Ревдинский рабочий:/ru/svrd/revda,/ru/svrd/pervik
Газета уральских москвичей:/ru/msk,/ru/permobl,/ru/chelobl
```

**Ответ:**
```json
{
  "success": true,
  "message": "Platforms loaded successfully",
  "loadedPlatformsCount": 3
}
```

### 2. Поиск рекламных площадок

**GET** `/api/platforms/search?location={location}`

Возвращает список рекламных площадок, подходящих для указанной локации.

**Параметры:**
- `location` (query) - локация для поиска (например, `/ru/msk`)

**Ответ:**
```json
{
  "location": "/ru/msk",
  "platforms": [
    "Яндекс.Директ",
    "Газета уральских москвичей"
  ]
}
```

## Примеры использования

### Загрузка данных через curl:
```bash
curl -X POST "https://localhost:7000/api/platforms/load" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@test-platforms.txt"
```

### Поиск площадок через curl:
```bash
curl "https://localhost:7000/api/platforms/search?location=/ru/svrd/revda"
```

## Примеры работы с тестовыми данными

После загрузки файла `test-platforms.txt`:

- Для локации `/ru` найдется: Яндекс.Директ, Google Ads, VK Реклама
- Для локации `/ru/msk` найдется: Яндекс.Директ, Google Ads, VK Реклама, Газета уральских москвичей
- Для локации `/ru/svrd/revda` найдется: Яндекс.Директ, Google Ads, VK Реклама, Ревдинский рабочий, Крутая реклама, Локальный портал

## Тестирование

Проект включает unit тесты, покрывающие:
- Загрузку данных из файла
- Поиск по различным локациям
- Обработку некорректных данных
- Граничные случаи
